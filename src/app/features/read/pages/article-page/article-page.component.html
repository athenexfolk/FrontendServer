<main class="max-w-screen-md mx-auto p-4 grid grid-cols-1 gap-4 pb-20">
  <ng-container *ngIf="post$ | async as post; else loading">
    <app-post [pa]="post"></app-post>
    <div class="flex gap-4 items-center">
      <app-love-button
        [isLoved]="post.post.isLiked!"
        [loveCount]="post.post.likeCount!"
        [ofPostId]="post.post.id"
      ></app-love-button>
      <button
        class="p-2 rounded-full flex justify-center items-center hover:text-zinc-800"
      >
        <span class="material-symbols-rounded"> share </span>
      </button>
      <app-save-button
        [isSaved]="post.post.isSave!"
        [ofPostId]="post.post.id"
      ></app-save-button>
    </div>
    <hr />

    @defer (when isLoadComment) {
    <app-comment-section [postId]="post.post.id"></app-comment-section>
    }@placeholder {
    <button
      (click)="loadCommentSection()"
      class="px-4 py-2 rounded-lg bg-zinc-600 hover:bg-zinc-800 text-white font-semibold"
    >
      อ่านและแสดงความคิดเห็น
    </button>
    } @loading {
    <div class="text-center">
      <p>กำลังโหลด...</p>
    </div>
    }
  </ng-container>
</main>

<ng-template #loading> loading... </ng-template>
