<div *ngIf="!isLoggedIn" class="px-4 w-full">
  <div class="p-8 grid grid-cols-1 gap-8 lg:grid-cols-2 lg:gap-0 items-center">
    <img
      src="assets/images/logo-main.svg"
      class="w-64 h-64 lg:w-72 lg:h-72 mx-auto"
    />
    <div class="grid grid-cols-1 gap-4">
      <h2 class="text-3xl md:text-4xl lg:text-5xl xl:text-6xl font-bold">
        {{ title }}
      </h2>
      <p>{{ description }}</p>
      <button
        class="bg-zinc-600 text-zinc-100 font-bold text-lg px-4 py-2 rounded-full text-center hover:bg-zinc-700"
        [routerLink]="['auth', 'signup']"
      >
        เริ่มต้นใช้งาน
      </button>
    </div>
  </div>
</div>

<div class="flex flex-col-reverse lg:flex-row gap-8 relative">
  <main class="grow p-4 lg:p-8 max-w-screen-md mx-auto" #postgroup>
    <h2 class="text-3xl font-bold mb-4">โพสต์ทั้งหมด</h2>
    @defer (when ppas) {
    <ng-container *ngIf="ppas.length; else emptyPosts">
      <div class="grid grid-cols-1 divide-y">
        <app-post-preview
          *ngFor="let ppa of ppas; trackBy: postTrackBy"
          [ppa]="ppa"
          [userId]="userId"
          (deleteEmitter)="deleteId($event)"
        ></app-post-preview>
      </div>
    </ng-container>
    } @loading (minimum 500ms){
    <div class="flex justify-center items-center gap-4">
      <span class="material-symbols-rounded animate-spin">
        progress_activity </span
      >กำลังโหลดข้อมูล...
    </div>
    }

    <div
      *ngIf="!readyStatus && ppas.length"
      class="flex justify-center items-center gap-4"
    >
      <span class="material-symbols-rounded animate-spin">
        progress_activity </span
      >กำลังโหลดข้อมูลเพิ่มเติม...
    </div>

    <div
      *ngIf="endLoad && ppas.length"
      class="flex justify-center items-center gap-2 my-8"
    >
      <div class="border border-zinc-500 grow"></div>
      <p class="font-semibold text-zinc-500">ไม่มีโพสต์ที่จะต้องโหลดอีกแล้ว</p>
      <div class="border border-zinc-500 grow"></div>
    </div>
  </main>

  <div class="lg:sticky lg:top-0 lg:w-[360px] max-w-screen-md mx-auto p-4 lg:p-8 lg:h-screen shrink-0 grow-0">
    <h2 class="text-3xl font-bold mb-4">แท็กยอดนิยม</h2>
    <div class="flex items-center gap-4 py-6">
      <app-tag-group>
        <app-tag *ngFor="let tag of topTags" [tag]="tag"></app-tag>
      </app-tag-group>
    </div>

    <div class="bg-zinc-200 rounded-lg border-4 border-zinc-300 border-dashed h-40 flex justify-center items-center my-6">
      <span class="font-bold text-xl text-zinc-500">พื้นที่โฆษณา</span>
    </div>
  </div>
</div>

<ng-template #emptyPosts>
  <div class="text-center">ไม่มีโพสต์</div>
</ng-template>
