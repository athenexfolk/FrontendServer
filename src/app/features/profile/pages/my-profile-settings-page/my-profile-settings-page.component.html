<div class="p-4 max-w-lg mx-auto">
  @defer(when myProfile) {
  <div class="space-y-8">
    <div>
      <h3 class="text-2xl font-bold mb-2">รูปโปรไฟล์</h3>
      <div class="flex justify-between items-center">
        <div class="relative">
          <app-avatar [src]="myProfile.userId" [size]="40"></app-avatar>
          <button
            (click)="avatarFile.click()"
            class="absolute right-0 bottom-0 flex justify-center items-center p-2 shadow bg-white rounded-full hover:text-yellow-700"
          >
            <span class="material-symbols-rounded">photo</span>
          </button>
        </div>
        <span *ngIf="newAvatarSrc" class="material-symbols-rounded">
          east
        </span>
        <div *ngIf="newAvatarSrc" class="relative">
          <img
            class="object-cover object-center rounded-full w-40 h-40"
            [src]="newAvatarSrc"
          />
          <button
            (click)="clearCoverImage()"
            class="absolute right-0 bottom-0 flex justify-center items-center p-2 shadow bg-white rounded-full hover:text-red-700"
          >
            <span class="material-symbols-rounded">delete</span>
          </button>
        </div>
      </div>
    </div>

    <div>
      <h3 class="text-2xl font-bold mb-2">ชื่อ</h3>
      <div class="flex items-center gap-4">
        <input
          class="px-4 py-2 w-full rounded-lg bg-zinc-100"
          type="text"
          [(ngModel)]="myProfile.displayName"
          placeholder="ชื่อที่ใช้สำหรับแสดงผล"
        />
      </div>
    </div>

    <div>
      <h3 class="text-2xl font-bold mb-2">คำอธิบายตัวคุณ</h3>
      <div class="flex items-center gap-4">
        <textarea
          class="px-4 py-2 w-full rounded-lg bg-zinc-100 resize-none"
          [rows]="4"
          [(ngModel)]="myProfile.shortBio"
          placeholder="คำอธิบายตัวคุณ"
        ></textarea>
      </div>
    </div>

    <button
      (click)="updateProfile()"
      class="p-4 w-full rounded-lg font-semibold bg-zinc-600 text-white hover:bg-zinc-800"
    >
      อัปเดตโปรไฟล์
    </button>
  </div>
  } @loading { loading... }
</div>

<input
  type="file"
  accept="image/*"
  class="hidden"
  (input)="onAvatarChange($event)"
  #avatarFile
/>
